<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Football Kits</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/dashboard.css">
    <style>
        .site-logo {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            vertical-align: middle;
        }
        .site-title {
            display: flex;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-dark sidebar">
                <div class="position-sticky pt-3">
                    <div class="site-title">
                        <img src="images/football-logo.svg" alt="Football Kits Logo" class="site-logo">
                        <span>Football Kits</span>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" id="dashboardLink">
                                Tableau de bord
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" id="productsLink">
                                Produits
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" id="ordersLink">
                                Commandes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" id="clientsLink">
                                Clients
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" id="invoiceLink">
                                Facture
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" id="logoutBtn">
                                Déconnexion
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Dashboard Section -->
                <div id="dashboardSection">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1>Tableau de bord</h1>
                    </div>

                    <!-- Statistics Cards -->
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Total Produits</h5>
                                    <h2 id="totalProducts">12</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Commandes</h5>
                                    <h2 id="totalOrders">3</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Revenus</h5>
                                    <h2 id="totalRevenue">1,234.99€</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Section -->
                <div id="productsSection" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>Gestion des Produits</h2>
                        <button class="btn btn-primary" id="addProductBtn">Ajouter un produit</button>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Image</th>
                                    <th>Nom</th>
                                    <th>Prix</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Invoice Section -->
                <div id="invoiceSection" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>Gestion des Factures</h2>
                        <button class="btn btn-primary" id="generateInvoiceBtn">Générer une facture</button>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>N° Facture</th>
                                    <th>Date</th>
                                    <th>Client</th>
                                    <th>Montant</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="invoicesTableBody">
                                <tr>
                                    <td>FAC-001</td>
                                    <td>2024-01-15</td>
                                    <td>John Doe</td>
                                    <td>269.97€</td>
                                    <td><span class="badge bg-success">Payée</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-info">Voir</button>
                                        <button class="btn btn-sm btn-secondary">Télécharger</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>FAC-002</td>
                                    <td>2024-01-16</td>
                                    <td>Jane Smith</td>
                                    <td>179.98€</td>
                                    <td><span class="badge bg-warning">En attente</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-info">Voir</button>
                                        <button class="btn btn-sm btn-secondary">Télécharger</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Clients Section -->
                <div id="clientsSection" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>Gestion des Clients</h2>
                        <button class="btn btn-primary" id="addClientBtn">Ajouter un client</button>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nom</th>
                                    <th>Email</th>
                                    <th>Téléphone</th>
                                    <th>Adresse</th>
                                    <th>Total Achats</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="clientsTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Orders Section -->
                <div id="ordersSection" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>Gestion des Commandes</h2>
                    </div>

                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Client</th>
                                    <th>Téléphone</th>
                                    <th>Email</th>
                                    <th>Adresse</th>
                                    <th>Produits</th>
                                    <th>Total</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Order Details Modal -->
                <div class="modal fade" id="orderDetailsModal">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Détails de la Commande</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <h6>Informations Client</h6>
                                        <p id="orderClientInfo"></p>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Statut de la Commande</h6>
                                        <select class="form-select" id="orderStatus">
                                            <option value="En attente">En attente</option>
                                            <option value="En cours">En cours</option>
                                            <option value="Livré">Livré</option>
                                            <option value="Annulé">Annulé</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Produit</th>
                                                <th>Quantité</th>
                                                <th>Prix unitaire</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="orderItemsDetails">
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" class="text-end"><strong>Total:</strong></td>
                                                <td id="orderTotalDetails"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                                <button type="button" class="btn btn-primary" onclick="updateOrderStatus()">Mettre à jour le statut</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal de modification de commande -->
                <div class="modal fade" id="editOrderModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Modifier la commande</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="editOrderClientName" class="form-label">Nom du client</label>
                                        <input type="text" class="form-control" id="editOrderClientName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="editOrderPhone" class="form-label">Téléphone</label>
                                        <input type="tel" class="form-control" id="editOrderPhone" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="editOrderEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="editOrderEmail" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="editOrderAddress" class="form-label">Adresse</label>
                                        <input type="text" class="form-control" id="editOrderAddress" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="editOrderStatus" class="form-label">Statut</label>
                                        <select class="form-select" id="editOrderStatus">
                                            <option value="En attente">En attente</option>
                                            <option value="En cours">En cours</option>
                                            <option value="Livré">Livré</option>
                                            <option value="Annulé">Annulé</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                                <button type="button" class="btn btn-primary" onclick="saveOrderChanges()">Enregistrer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Product Modal -->
    <div class="modal fade" id="productModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ajouter un produit</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="productForm">
                        <div class="mb-3">
                            <label for="productName" class="form-label">Nom du produit</label>
                            <input type="text" class="form-control" id="productName" required>
                        </div>
                        <div class="mb-3">
                            <label for="productPrice" class="form-label">Prix (€)</label>
                            <input type="number" step="0.01" min="0" class="form-control" id="productPrice" required>
                        </div>
                        <div class="mb-3">
                            <label for="productImage" class="form-label">URL de l'image</label>
                            <input type="text" class="form-control" id="productImage" required>
                            <small class="text-muted">Exemple: images/nom-du-kit.jpg</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" onclick="saveProduct()">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div class="modal fade" id="invoiceModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Détails de la Facture</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-content">
                        <div class="row mb-4">
                            <div class="col-6">
                                <h4>Football Kits Store</h4>
                                <p>123 Rue du Commerce<br>75001 Paris, France</p>
                            </div>
                            <div class="col-6 text-end">
                                <h4 class="text-primary" id="invoiceNumber"></h4>
                                <p id="invoiceDate"></p>
                            </div>
                        </div>
                        <div class="row mb-4">
                            <div class="col-6">
                                <h5>Facturé à:</h5>
                                <p id="clientInfo"></p>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Produit</th>
                                        <th>Quantité</th>
                                        <th>Prix unitaire</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="invoiceItems">
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="3" class="text-end"><strong>Total:</strong></td>
                                        <td id="invoiceTotal"></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <p class="text-muted">Statut: <span id="invoiceStatus" class="badge"></span></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-primary" onclick="downloadInvoice()">Télécharger</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Client Modal -->
    <div class="modal fade" id="clientModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Gérer le client</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="clientForm">
                        <div class="mb-3">
                            <label class="form-label">Nom</label>
                            <input type="text" class="form-control" id="clientName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="clientEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Téléphone</label>
                            <input type="tel" class="form-control" id="clientPhone" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Adresse</label>
                            <textarea class="form-control" id="clientAddress" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="saveClientBtn">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/admin.js"></script>
    <script>
        // Vérification de l'authentification
        if (!localStorage.getItem('isAdminLoggedIn')) {
            window.location.href = 'login.html';
        }
    </script>
</body>
</html> 